<mat-card *ngIf="cargarBarra">
    <mat-card-actions aling="baseline">
        <button *ngIf="oclAnterior && buscarLte" class="m-4" mat-raised-button color="primary"
            (click)="anterior()">Anterior</button>
        <button mat-raised-button *ngIf="!buscarLte" class="m-4" color="primary"
            (click)="siguiente()">Siguiente</button>
        <button class="m-4" mat-raised-button color="accent" *ngIf="!buscarLte" (click)="filtLte()">Buscar Lote</button>
        <button class="m-4" mat-raised-button color="accent" *ngIf="buscarLte" (click)="volver()">Volver</button>
        <input *ngIf="buscarLte" [(ngModel)]='nroLte' type="number" id="nroLte" class="m-4">
        <button mat-icon-button color="primary" aria-label="Example icon button with a vertical three dot icon"
            *ngIf="nroLte" (click)="cargar()">
            <mat-icon matTooltip="Buscar">search</mat-icon>
        </button>

    </mat-card-actions>


    <mat-card-footer>
        <mat-progress-bar *ngIf="!cargando" mode="indeterminate"></mat-progress-bar>
    </mat-card-footer>

</mat-card>
<div fxLayout="row wrap">

    <div *ngFor="let grp of lotes" fxFlex="100" fxFlex.gt-sm="50" fxFlex.sm="50">

        <mat-card class="user-card p-0" *ngIf="!buscarLte">
            <mat-card-title>
                <div class="card-title-text">
                    <a class="toolbar-avatar md mr-16"><img src="assets/images/votosper.jpg" alt=""></a>
                    <span>Lote Nro:. {{grp.nro}} </span>
                    <span fxFlex></span>
                    <button mat-icon-button [matMenuTriggerFor]="loteMenu" class="">
                        <mat-icon class="color-texto-primario icon-blue size-texto-40">add_circle</mat-icon>
                    </button>
                    <mat-menu #loteMenu="matMenu">
                        <button *ngIf="grp.estadoAfiliacion==='activo'" mat-menu-item
                            (click)="openDialogAfiliar(grp.nro)">Agregar
                            planilla de Afiliado</button>
                        <button *ngIf="grp.planillas.length" mat-menu-item
                            (click)="openDialogPlanillas(grp.planillas)">Ver
                            planillas
                            Cargadas</button>

                    </mat-menu>
                </div>
                <mat-divider></mat-divider>
            </mat-card-title>
            <mat-card-content>
                <!-- user detail lines-->
                <div class="user-details">
                    <p>
                        <mat-icon class="text-muted">create_new_folder
                        </mat-icon>
                        <mat-chip mat-sm-chip style="color: rgba(0, 132, 255, 0.816)"
                            *ngIf="grp.estadoAfiliacion==='activo'">
                            Estado del
                            lote: {{grp.estadoAfiliacion|titlecase}}</mat-chip>
                        <mat-chip mat-sm-chip style="color: red" *ngIf="grp.estadoAfiliacion==='cerrado'">
                            Estado del
                            lote: {{grp.estadoAfiliacion|titlecase}}</mat-chip>
                        <mat-chip mat-sm-chip style="color: rgb(255, 153, 0)" *ngIf="grp.estadoAfiliacion==='pausado'">
                            Estado del
                            lote: {{grp.estadoAfiliacion|titlecase}}</mat-chip>
                        <mat-chip mat-sm-chip style="color: rgb(72, 175, 94)"
                            *ngIf="grp.estadoAfiliacion==='presentado'">
                            Estado del
                            lote: {{grp.estadoAfiliacion|titlecase}}</mat-chip>

                        <mat-chip mat-sm-chip style="color: #b245da" *ngIf="grp.estadoAfiliacion==='devuelto CNE'">
                            Estado del
                            lote: {{grp.estadoAfiliacion|titlecase}}</mat-chip>

                    </p>
                    <p>
                        <mat-icon class=" text-muted">attribution_icon</mat-icon>Responsable del
                        lote: {{grp.usuarioResponsable.apellido|titlecase}}
                        {{grp.usuarioResponsable.nombres|titlecase}}
                    </p>
                    <p>
                        <mat-icon class="text-muted">phone</mat-icon>Teléfono del responsable del
                        lote: {{grp.usuarioResponsable.telefono}}
                    </p>
                    <p>
                        <mat-icon class="text-muted">location_on</mat-icon>Localidad: {{grp.lugarAfiliacion.localidad
                        |titlecase}}
                    </p>
                    <p>
                        <mat-icon class="text-muted">domain_icon</mat-icon> Lugar:.{{grp.lugarAfiliacion.nombreEdificio
                        |titlecase}}
                    </p>

                    <p>
                        <mat-icon class="material-icons color_azul">perm_identity</mat-icon>
                        Total Planillas: {{grp.planillas?.length }}
                    </p>



                    <ng-container *ngFor='let usrTotal of totalVotos'>

                        <ng-container *ngIf='user._id ===  usrTotal.idUs'>

                            <p>
                                <mat-icon class="material-icons color_azul">perm_identity</mat-icon>
                                Votos
                                Adhesion: {{usrTotal.votosAdhesion}}
                            </p>
                            <p>
                                <mat-icon class="material-icons color_green">task_alt</mat-icon>Votaron:
                                {{usrTotal.votosEfectuados}}
                            </p>
                            <p>
                                <mat-icon class="material-icons color_naranja">report_problem</mat-icon>Pendientes:
                                {{usrTotal.votosFaltantes}}
                            </p>
                        </ng-container>
                    </ng-container>
                </div>
            </mat-card-content>
        </mat-card>



        <mat-card class="user-card p-0" *ngIf="buscarLte">
            <mat-card-title>
                <div class="card-title-text">
                    <a class="toolbar-avatar md mr-16"><img src="assets/images/votosper.jpg" alt=""></a>
                    <span>Lote Nro:. {{grp.nro}} </span>
                    <span fxFlex></span>
                    <button mat-icon-button [matMenuTriggerFor]="loteMenu" class="">
                        <mat-icon class="color-texto-primario icon-blue size-texto-40">add_circle</mat-icon>
                    </button>
                    <mat-menu #loteMenu="matMenu">
                        <button *ngIf="grp.estadoAfiliacion==='activo'" mat-menu-item
                            (click)="openDialogAfiliar(grp.nro)">Agregar
                            planilla de Afiliado</button>
                        <button *ngIf="grp.planillas.length" mat-menu-item
                            (click)="openDialogPlanillas(grp.planillas)">Ver
                            planillas
                            Cargadas</button>

                    </mat-menu>
                </div>
                <mat-divider></mat-divider>
            </mat-card-title>
            <mat-card-content>
                <!-- user detail lines-->
                <div class="user-details">
                    <p>
                        <mat-icon class="text-muted">create_new_folder
                        </mat-icon>
                        <mat-chip mat-sm-chip style="color: rgba(0, 132, 255, 0.816)"
                            *ngIf="grp.estadoAfiliacion==='activo'">
                            Estado del
                            lote: {{grp.estadoAfiliacion|titlecase}}</mat-chip>
                        <mat-chip mat-sm-chip style="color: red" *ngIf="grp.estadoAfiliacion==='cerrado'">
                            Estado del
                            lote: {{grp.estadoAfiliacion|titlecase}}</mat-chip>
                        <mat-chip mat-sm-chip style="color: rgb(255, 153, 0)" *ngIf="grp.estadoAfiliacion==='pausado'">
                            Estado del
                            lote: {{grp.estadoAfiliacion|titlecase}}</mat-chip>
                        <mat-chip mat-sm-chip style="color: rgb(72, 175, 94)"
                            *ngIf="grp.estadoAfiliacion==='presentado'">
                            Estado del
                            lote: {{grp.estadoAfiliacion|titlecase}}</mat-chip>

                        <mat-chip mat-sm-chip style="color: #b245da" *ngIf="grp.estadoAfiliacion==='devuelto CNE'">
                            Estado del
                            lote: {{grp.estadoAfiliacion|titlecase}}</mat-chip>

                    </p>
                    <p>
                        <mat-icon class=" text-muted">attribution_icon</mat-icon>Responsable del
                        lote: {{grp.usuarioResponsable.apellido|titlecase}}
                        {{grp.usuarioResponsable.nombres|titlecase}}
                    </p>
                    <p>
                        <mat-icon class="text-muted">phone</mat-icon>Teléfono del responsable del
                        lote: {{grp.usuarioResponsable.telefono}}
                    </p>
                    <p>
                        <mat-icon class="text-muted">location_on</mat-icon>Localidad: {{grp.lugarAfiliacion.localidad
                        |titlecase}}
                    </p>
                    <p>
                        <mat-icon class="text-muted">domain_icon</mat-icon> Lugar:.{{grp.lugarAfiliacion.nombreEdificio
                        |titlecase}}
                    </p>

                    <p>
                        <mat-icon class="material-icons color_azul">perm_identity</mat-icon>
                        Total Planillas: {{grp.planillas?.length }}
                    </p>



                    <ng-container *ngFor='let usrTotal of totalVotos'>

                        <ng-container *ngIf='user._id ===  usrTotal.idUs'>

                            <p>
                                <mat-icon class="material-icons color_azul">perm_identity</mat-icon>
                                Votos
                                Adhesion: {{usrTotal.votosAdhesion}}
                            </p>
                            <p>
                                <mat-icon class="material-icons color_green">task_alt</mat-icon>Votaron:
                                {{usrTotal.votosEfectuados}}
                            </p>
                            <p>
                                <mat-icon class="material-icons color_naranja">report_problem</mat-icon>Pendientes:
                                {{usrTotal.votosFaltantes}}
                            </p>
                        </ng-container>
                    </ng-container>
                </div>
            </mat-card-content>
        </mat-card>

    </div>





</div>